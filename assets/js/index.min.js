$(document).ready(function(){function e(e,t){var a=e.width(),o=t.width(),n=e.height(),s=t.height();if(n<s){e.css({width:"auto",height:"100%"}),a=e.width(),o=t.width();var r=(a-o)/2;e.css("margin-left","-"+r+"px")}else{var i=(s-n)/2;e.css("margin-top",i+"px")}e.fadeIn()}function t(){var e=$("#search_input"),t=$(".search_result");e.focus(function(){$(".icon-search").css("color","#3199DB"),t.show()}),e.keyup(a(this.autoComplete)),$(document).click(function(e){"search_input"!==e.target.id&&"search_result"!==e.target.className&&"search_item"!==e.target.className&&($(".icon-search").css("color","#CAD3DC"),t.hide())})}function a(e,t){var a;return t=t||120,function(){var o=this,n=arguments,s=function(){e.apply(o,n)};clearTimeout(a),a=setTimeout(s,t)}}function o(e){e+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",function(t){(window.clipboardData||t.originalEvent.clipboardData).setData("text/plain",e),t.preventDefault()})}$.getJSON("/assets/data/motto.json",function(e){if(e[0].top){var t=e[0].homeTitle,a=e[0].description;return $("#homeTitle").text(t),void $("#description").text(a)}var o=e.length,n=Math.floor(Math.random()*o),t=e[n].homeTitle,a=e[n].description;$("#homeTitle").text(t),$("#description").text(a)});var n=$(".g-nav");if($("#menu-toggle").on("click",function(e){n.slideToggle(200),$(document).on("click",function(){n.slideUp(200)}),e.stopPropagation()}),n.on("click",function(e){e.stopPropagation()}),$(window).width()>695){var s=$(".g-header"),r=s.outerHeight(),i=$(".g-logo"),c=n.find("a"),l=$(".g-banner").attr("data-theme"),h=$(document).scrollTop();$(document).scroll(function(){var e=$(this).scrollTop(),t="nav-"+l;e>r?(e>3*r&&s.addClass("headerUp"),s.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),i.css({background:"url(/assets/icons/logo_"+l+".png) no-repeat center","background-size":"100% 100%"}),c.css("color","#666"),n.addClass(t)):(s.removeClass("headerUp"),s.css({"background-color":"transparent","box-shadow":"none"}),i.css({background:"url(/assets/icons/logo.png) no-repeat center","background-size":"100% 100%"}),c.css("color","#fff"),n.removeClass(t)),h>e?s.addClass("headerDown"):s.removeClass("headerDown"),h=e})}$(".read-next-item section").each(function(){var e=$(this).height(),t=$(".read-next-item").height();$(this).css("margin-top",(t-e)/2+"px"),$(this).fadeIn()}),$(".read-next-item img").each(function(){e($(this),$(".read-next-item"))}),function(){for(var e=parseInt($("#total_pages").val()),t=parseInt($("#current_pages").val()),a=$("#base_url").val(),o="",n=t-3;n<t;n++)n>0&&1!==n?o+='<a href="'+a+"page"+n+'" class="page-link page-num">'+n+"</a>":1===n&&(o+='<a href="'+a+'" class="page-link page-num">'+n+"</a>");o+='<span class="page-link page-num active">'+t+"</span>";for(var s=t+1;s<=t+3;s++)s<=e&&(o+='<a href="'+a+"page"+s+'" class="page-link page-num">'+s+"</a>");$("#page-link-container").html(o)}(),t.prototype.autoComplete=function(){var e=this.value.toLowerCase();e.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),$.getJSON("../../search.json").done(function(t){var a="";for(var o in t){var n=t[o],s=n.title,r=n.tags,i=(n.url,s+r);""!==e&&i.toLowerCase().indexOf(e)>=0&&(a+='<a class="search_item" href="'+n.url+'">'+n.title+"</a>")}$(".search_result").html(a)})},new t,"true"===$("#nm-switch").val()&&function(){var e=$("body"),t=new Date,a=t.getHours();(a>=0&&a<=6||23===a)&&e.addClass("night-mode")}(),$(".post-content").on("mouseup",function(e){var t=window.getSelection();t.toString().length>=30&&o(t)})});